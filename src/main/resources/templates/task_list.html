<!-- layout.html 템플릿 상속 -->
<html layout:decorate="~{layout}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<!-- 부모 템플릿 th:block 엘리먼트 내용을 자식 템플릿의 div 엘리먼트 내용으로 교체 -->
<div layout:fragment="content" class="container">
        <header>
            <!-- 로그아웃 버튼은 인증된 사용자에게만 표시  -->
            <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post">
                <input type="submit" value="로그아웃">
            </form>
            <form th:action="@{/task/search}" method="get">
                <div>
                    <input type="text" name="keyword" id="keyword">
                </div>
                <input type="submit" value="검색">
            </form>
        </header>
        <div th:if="${noResult}" th:text="${noResult}"></div>
        <table th:unless="${noResult}">
            <thead>
                <tr>
                    <th>제목</th>
                    <th>목표 시간</th>
                    <th>상세 내용</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="task: ${taskList}">
                    <td>
                        <a th:href="@{|/task/detail/${task.id}|}" th:text="${task.subject}"></a>
                    </td>
                    <td th:text="${task.estimatedAt}"></td>
                    <td th:text="${task.description}"></td>
                    <td th:switch="${#strings.toString(task.status)}">
                        <form th:case="'STANDBY'" th:action="@{|/task/start/${task.id}|}" method="get">
                            <input type="submit" name="start" value="시작">
                        </form>
                        <div th:case="'ING'">
                            <form th:action="@{|/task/pause/${task.id}|}" method="post">
                                <input type="submit" name="pause" value="일시정지">
                            </form>
                            <form th:action="@{|/task/complete/${task.id}|}" method="post">
                                <input type="submit" name="complete" value="완료">
                            </form>
                        </div>
                        <form th:case="'PAUSE'" th:action="@{|/task/continue/${task.id}|}" method="post">
                            <input type="submit" name="continue" value="계속">
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
        <form th:action="@{/task/create}" method="get">
            <input type="submit" value="추가">
        </form>
    </div>
</div>
</html>